# テーブル定義書1
## 全体
- テーブルごとにシートが分かれていない
> テーブルごとにシートを分けたほうがすぐに確認できてわかりやすいですので、テーブルを分割して記載してみてください。
- テーブル名の命名規則が不適切
    - 小文字複数形スネークケースで命名
>  テーブル名は下記命名規則にしたがって下さい。
  > - 小文字アルファベット
  > - 複数形
  > - スネークケース(複数単語は空欄ではなく"_"で区切る)
- カラム名にそのテーブル名に相当する接頭辞は不要
    - usersテーブルのuser_telなど
> user_telなどカラム名にテーブル名が含まれているものがありますが、テーブル名で判断できるものは省いてください。
> 例) user_tel → tel
- カラム名に省略形を使用すべきではない
    - user_l_nameなど
> カラム名は省略せずに命名しましょう。
- created_atとupdated_atのカラム名が不適切
    - 全てそれぞれユーザ登録日時とユーザ更新日時になっている
> 全てのテーブルでcreated_atとupdated_atがユーザーに関するものになっています。テーブルごとに正しい説明を記載してください。
- PK(id)がないテーブルが存在する
> railsでは自動でPKとしてidが作成されます。idがないテーブルに追記してください。
- 入荷と配送先テーブルがない
    - 入荷は商品の入荷を管理するため
    - 配送先は複数データを保存するため
        - 宛先を追加
> 下記の要件を満たすテーブルをご検討ください。
> - ユーザーが配送先を複数登録できる
>   - 宛先も必要
> - 商品の入荷を管理できる（入荷日時、入荷商品、入荷個数）

## Admin
- テーブル名が単数になっている
> テーブル名を複数形にしてください。

## Users
- テーブル名が不適切
    - どのユーザーかわからない
> Userテーブルだと管理者かエンドユーザーかが分かりませんので、それが分かるように命名しましょう。
- カラム名にテーブル名の接頭辞がある
> user_telなどカラム名にテーブル名が含まれているものがありますが、テーブル名で判断できるものは省いてください。
> 例) user_tel → tel
- カラム名に略語がある
> カラム名は省略せずに命名しましょう。
- 郵便番号と電話番号がinteger型
> 郵便番号と電話番号がinteger型で保存されていますが、integer型は0から始まるものの0が省かれてしまいます。012-3456のようなデータも保存できるようにしましょう。
- member_statusだとfalseの状態が何を示すかわからない
> member_statusがメンバーのどんなステータスを表しているのかが分かりづらいです。
> 退会フラグであればis_deletedなどとしましょう。
- member_statusがstring型
> member_statusをstring型で保存していますが、true or falseで管理する場合はboolean型を利用しましょう。

## Products
- カラム名にテーブル名の接頭辞がある
> user_telなどカラム名にテーブル名が含まれているものがありますが、テーブル名で判断できるものは省いてください。
> 例) user_tel → tel
- FKが設定されていない
> FKとなるカラムがあればFKであることを示しましょう。
- 不要なidがある
> disk_idがFKとして保存されていますが、これは必要でしょうか？
- cd_titleのcdは不要
> 商品のタイトルといえばcdタイトルですので、titleのみで構いません。
- 在庫ステータスと在庫数は不要
    - 在庫ステータスは在庫数から判別して表示する
    - 在庫数は入荷テーブルと受注詳細テーブルから算出可能
> 基本的に他の情報から算出できる情報はカラムを作成する必要はありません。在庫ステータスカラムがありますが、これは在庫数から判断できませんか？
> また在庫数カラムがありますが、商品を入荷するごとに修正しますか？商品を入荷した時点で自動更新する仕組みを検討してみましょう。

## Discs
- カラム名にテーブル名の接頭辞がある
> user_telなどカラム名にテーブル名が含まれているものがありますが、テーブル名で判断できるものは省いてください。
> 例) user_tel → tel
- products_idではなく、product_id
> FKの商品IDがproducts_idとなっていますが、discに紐づく1件の商品IDが入るので単数にしましょう。

## Songs
- songカラムの命名が不適切
    - songが曲名だと分かりづらい
> songだと何の情報か分かりづらいので、カラム名を「name」などとしましょう。
- songカラムがinteger型
> 例えば、「君が代」という曲名は保存できますか？
- 曲順を管理するカラムがない
> 曲順はどのように管理しますか？

## Labels
- product_idは不要
> product_idは必要でしょうか？必要であれば理由を教えて下さい。
- labelカラムの命名が不適切
    - labelがレーベル名だと分かりづらい
> labelだと何の情報か分かりづらいので、カラム名を「name」などとしましょう。

## Artists
- product_idは不要
> product_idは必要でしょうか？必要であれば理由を教えて下さい。
- artistカラムの命名が不適切
    - artistがアーティスト名だと分かりづらい
> artistだと何の情報か分かりづらいので、カラム名を「name」などとしましょう。
- artistカラムがinteger型
> 例えば、「ゆず」というアーティストは保存できますか？

## Genre
- テーブル名が単数になっている
> テーブル名は複数形にしてください。
- product_idは不要
> product_idは必要でしょうか？必要であれば理由を教えて下さい。
- genreカラムの命名が不適切
    - genreがジャンル名だと分かりづらい
> genreだと何の情報か分かりづらいので、カラム名を「name」などとしましょう。
- genreカラムがinteger型
> 例えば、「洋楽」というジャンルは保存できますか？

## Cart item
- products_idではなく、product_id
> FKの商品IDがproducts_idとなっていますが、discに紐づく1件の商品IDが入るので単数にしましょう。
> 合わせてデータ型も定義しましょう。
- buy numが不適切
    - カラム名に空欄がある
    - 購入枚数は数量を表す名称にすべき
> buy numカラムですが、下記2点ご確認ください。
> - カラム名が命名規則に沿っているか
> - ここは購入枚数を保存するカラムなので、数量を表すカラム名に変更
- 小計金額は不要
    - 各商品価格から算出可能
> 基本的に他の情報から算出できる情報はカラムを作成する必要はありません。小計金額に関しては購入時の商品価格と購入枚数で算出できます。

## Buy
- テーブル名が不適切
    - 管理者目線でテーブル名は命名する
> テーブル名は、「受注」「注文」のような管理者目線で命名しましょう。
- Buy detailsとのリレーションが逆
> 現状だとBuy detailsにBuyが紐づく形になっています。この関係は適切でしょうか？
- payカラムの命名が不適切
    - 支払い方法だとわからない
> 支払い方法だと一目で分かるようなカラム名にしましょう。
- 支払い方法がstring型
> 支払い方法を「クレジットカード」や「振込」といった文字で管理すると更新時の手間やデータサイズを考えたときに適切ではありません。これらを解決するために「enum」が使えますので、調べてみてください。
- 支払合計カラムの命名が不適切
    - stockは合計金額の意味ではない
> 支払い合計のカラムが、stockになっています。これだと意味が異なります。
- 郵便番号と宛名がない
> 住所だけでなく、郵便番号や宛名も保存できるようにしましょう。
- 購入日は不要
    - このテーブルのレコード作成日が購入日
> railsで自動作成される登録日では代用できないでしょうか？もし代用できる場合役割が重複するカラムは不要です。
- 配送状況カラムがない
> 商品の配送状況は確認できますか？

## Buy details
- テーブル名が不適切
    - 管理者目線でテーブル名は命名する
> テーブル名は、「受注」「注文」のような管理者目線で命名しましょう。
- buy numが不適切
    - カラム名に空欄がある
    - 購入枚数は数量を表す名称にすべき
> buy numカラムですが、下記2点ご確認ください。
> - カラム名が命名規則に沿っているか
> - ここは購入枚数を保存するカラムなので、数量を表すカラム名に変更
- FKに商品idがない
> どの商品を購入したかを確認できますか？

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。


# 研修担当レビュー
<font color="Red">再提出の際はこのレビューを残しておいてください。</font>

## 全体
- たとえ同じ指摘項目であっても、テーブルごとに分けて記載しましょう。
- テーブル名の命名規則に即していないものがまだあります。
  - 小文字複数形スネークケースですね。
- カラム名にそのテーブル名に相当する接頭辞は不要です。(usersテーブルのuser_telなど)
  - 例えばusersテーブルなら、"ユーザの"何々というのは自明だからです。
  - 勿論別テーブルの情報なら必要です。FKが代表例ですね。
- カラム名に省略形はつかうべきではありません。
- created_at,updated_atの説明は適切でしょうか。
- PK名が不適当です。
  - 全てidになります。
  
## Users
- テーブル名が不適当です。
  - 今回ECサイトを使うユーザ、管理者側を使うユーザ、の２通りのユーザがいるので、「顧客」「エンドユーザ」など混乱しないような命名にしましょう。
  - データベースの情報は管理者が利用します。管理者側から見た呼び方にしておきましょう。
- 郵便番号、電話番号について、データ型は適切でしょうか。
  - 0から始まることを考えてみましょう。
- 配送先を複数登録したい場合、今の設計で問題ありませんか。

## Products
- 在庫ステータスについて指摘して下さっていますが、こちら本当に必要でしょうか。
- 在庫数は他から算出できませんでしょうか。
  - 注文の総計は特例(売上証拠として残す目的)ですが、基本他で参照・算出できるカラムは不要になります。

## Discs
- 商品idのカラム名は適切でしょうか。
- トラックナンバーの用途に誤りはありませんでしょうか。

## Songs
- 曲名カラムのカラム名が不適当です。
  - @song.songとして、これが曲名とはわかりづらいです。

## Labels
- 曲名同様、レーベルカラムのカラム名、カラム説明が不適当です。

## Artists
- 曲名同様、アーティスト名カラムのカラム名が不適当です。

## Genres
- 曲名同様、ジャンル名カラムのカラム名が不適当です。

## Cart item
- 商品idのカラム名は適切でしょうか。
- カラム名にスペースはNGです。
- 小計金額は他から算出できませんでしょうか。

## Buy
- テーブル名が管理者視点になっていません。
- buy_detailsとのリレーションは正しいでしょうか。
- 支払い方法のカラム名が不適当です。
- 支払い合計のカラム名が不適当です。
- 購入日は他で参照できませんでしょうか。

## Buy details
- テーブル名が管理者視点になっていません。
- 購入枚数のカラム名が不適当です。


# 研修担当レビュー
- **合格になります**が、以下ご確認ください。

## Discs
> ディスク順管理は要件対象外
- ディスク順要るようです。
