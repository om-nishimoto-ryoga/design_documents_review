# ER図1
## 全体
- カーディナリティに不足がある
    - 1以上か0以上か
> 1:多を表すカーディナリティを見直してみましょう。1対0以上なのか1対1以上なのかは実は重要です。
- railsで自動生成されるカラムが含まれていない
> railsで自動作成される登録日と更新日の記述もお願いいたします。
> また不要の場合はその理由を教えて下さい。
- 受注商品と入荷、配送先のテーブルがない
    - 受注商品は受注した商品を確認するため
    - 入荷は商品の入荷を管理するため
    - 配送先は複数データを保存するため
        - 郵便番号や宛先を追加
> 下記の要件を満たすテーブルをご検討ください。
> - ユーザーが配送先を複数登録できる
>   - 郵便番号や宛先も必要
> - 商品の入荷を管理できる
> - ユーザーが受注した商品を確認できる

## 管理人
- 管理人がFKとして商品やユーザーと紐付いている
> 管理人テーブルと商品、ユーザーテーブルが紐づく理由は何でしょうか？

## エンドユーザ
- 論理削除が考慮されていない
> ユーザを削除した場合、該当のレコードはどうなりますか？

## 商品
- ディスクが複数枚ある状況を考慮できていない
> 商品にディスクが複数枚存在する場合はどうなりますか？
- ステータスのカラム名が不適切
    - カッコ書きで書いているが、具体的な名称にするべき
>  ステータス(取り扱い)は、具体的に何の取り扱いステータスでしょうか？
- 在庫数は不要
    - 入荷テーブルと受注商品テーブルから算出可能
> 在庫数カラムがありますが、商品を入荷するごとに修正しますか？商品を入荷した時点で自動更新する仕組みを検討してみましょう。
- 論理削除が考慮されていない
> 商品を削除した場合、該当のレコードはどうなりますか？
- アーティスト名やジャンル、レーベル名は別途テーブルを作成するべき
    - 上記カラム情報に変更があった際にすべての商品の情報を修正しないといけない
> アーティスト名やジャンル名、レーベル名は商品ごとに入力しますか？そうだとすると、例えばジャンル名を変更したい場合かなり大変な作業になりませんか？

## カート
- リレーションが間違っている
    - ユーザーではなく、決済と紐付いている
> 現状だとどのユーザーがその商品をカートに入れたかを判断できない状況です。また決済と紐づく理由は何でしょうか？もう一度リレーションを検討してみましょう。
- 合計金額は不要
    - 各商品価格から算出可能
> 各商品ごとに合計金額のデータを保存する理由は何でしょうか？
- テーブル名が不適切
    - 正確にはカートない商品のデータが入っている
> このテーブルで扱うデータはカートではなく、カート内商品です。このことがぱっと分かるような命名をしましょう。
- PK名とテーブル名が一致していない
>  PKが注文idになっています。
- FKから取得できる情報はカラムとして不要
> 商品idを持っているため商品に関するデータは商品テーブルから引用可能です。こういった場合、基本的にはそこで参照可能な情報を保存するカラムは不要です。

## 決済
- テーブル名が不適切
    - 決済情報以外の購入にまつわる情報もほしい
> このテーブルでは決済情報以外の購入にまつわる情報も扱います。このことが分かるような命名をしましょう。
- 送料、合計金額カラムがない
> 送料や合計金額はどこで確認できますか？
- 購入日は不要
    - このテーブルのレコード作成日が購入日
> railsで自動作成される登録日では代用できないでしょうか？もし代用できる場合役割が重複するカラムは不要です。

## 購入履歴
- テーブル名が不適切
    - 管理者目線でテーブル名は命名する
> テーブル名は、「受注」「注文」のような管理者目線で命名しましょう。

# 注意
* マークダウン形式で記入してください。
* 全体を通しての指摘事項の場合、テーブル名の部分を「全体」「共通」などとしてください。


# 研修担当レビュー
- **合格になります**が、以下ご確認ください。

## 商品
> ディスクが複数枚ある状況を考慮できていない
- これに伴い、曲名カラムは不要です。(自明ではありますが)

## 決済
- 送付先住所カラムがありますが、宛名と郵便番号も必要です。
